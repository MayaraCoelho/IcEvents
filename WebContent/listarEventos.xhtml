<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions" >
      
	<ui:composition template="template.xhtml">
		
		<ui:define name="title">IC-Events - Lista de eventos</ui:define>
		
		<ui:define name="content">
			
			<h2>Lista de eventos</h2> 
			
			<c:if test="${user.tipo == 'ORGANIZADOR'}">
				<a href="cadastroEvento.xhtml"><button id="btnNew" class="btn btn-success">Novo +</button></a>
			</c:if>
			
			<table class="table table-hover">
			
				<tr>
					<th id="emailPessoaTbl">Tema</th>
					<th id="codigoPessoaTbl">Tipo</th>
					<th id="codigoPessoaTbl">Vagas disponíveis</th>
					<th id="nomePessoaTbl"></th>
				</tr>
				
				<c:forEach items="${listaEventos}" var="e">	
					
					<tr>
						<td id="emailPessoaTbl">${e.tema}</td>
						<td id="codigoPessoaTbl">${e.tipoEvento}</td>
						<td align="center" id="codigoPessoaTbl">${e.vagasDisponiveis} </td>
						<td id="nomePessoaTbl"><a href="evento/exibirDetalhes?evento=${e.codigoEvento}"><button type="button" class="btn btn-default"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Mais informações</button></a> &nbsp; &nbsp;
	    					
	    					<c:if test="${user.tipo == 'PARTICIPANTE' || user == null}">
		    					
		    					<c:if test="${e.statusEvento == 'INSCRICOES_ENCERRADAS'}"> 
		    						<a href="#"><button disabled="disabled" type="button" class="btn btn-warning"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> Inscrições encerradas</button></a>
		    					</c:if>
		    					
		    					<c:if test="${e.statusEvento == 'ENCERRADO'}">
		    						<a href="#"><button disabled="disabled" type="button" class="btn btn-warning"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> Evento encerrado</button></a>
		    					</c:if>
		    					
		    					<c:if test="${e.statusEvento == 'EM_ANDAMENTO'}">
		    						<a href="#"><button disabled="disabled" type="button" class="btn btn-warning"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> Evento em andamento</button></a>
		    					</c:if>
		    					
		    					<c:if test="${e.statusEvento == 'INSCRICOES_ABERTAS'}">
		    						<c:if test="${e.vagasDisponiveis le e.vagas}">
		    							<a href="evento/participarDeEvento?evento=${e.codigoEvento}"><button type="button" class="btn btn-success"><span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span> Participar</button></a>
		    						</c:if>
		    					</c:if>
	    					</c:if>
	    				</td>
					</tr>
					
				</c:forEach>
				
			</table>
		</ui:define>
		
	</ui:composition>
	
</html>